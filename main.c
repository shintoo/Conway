#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>
#include "life.h"

int main(int argc, char **argv ) {
	int generations = atoi(argv[1]);
	struct timespec req = {0, 200 * 1000 * 1000};
	struct timespec rem = {0,0};
	Field *Conway = NewField();
	Conway->SetSize(Conway, 50, 20);

	char *grid =
		"x------------------------------------------------x\n"
		"--------------------------------------------------\n"
		"---------------------------------x----------------\n"
		"----------------------------------x---------------\n"
		"---------------xxx---xxx--------xxx---------------\n"
		"--------------------------------------------------\n"
		"-------------x----x-x----x------------------------\n"
		"-------------x----x-x----x------------------------\n"
		"-------------x----x-x----x------------------------\n"
		"---------------xxx---xxx--------------------------\n"
		"------------------------------x--x----------------\n"
		"---------------xxx---xxx----------x---------------\n"
		"-------------x----x-x----x----x---x---------------\n"
		"-------------x----x-x----x-----xxxx---------------\n"
		"-------------x----x-x----x------------------------\n"
		"--------------------------------------------------\n"
		"---------------xxx---xxx--------------------------\n"
		"--------------------------------------------------\n"
		"--------------------------------------------------\n"
		"x------------------------------------------------x";
	
	Conway->SetGrid(Conway, grid);
	
	puts("Generation:\t1");
	Conway->Print(Conway);
	for (int i = 2; i <= generations; i++) {
		Conway->Evolve(Conway);
		printf("\n\nGeneration:\t%d\n", i);
		Conway->Print(Conway);
		nanosleep(&req, &rem);

	}

	return 0;
}

